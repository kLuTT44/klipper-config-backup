[include safe_park.cfg]

[gcode_macro LOAD_FILAMENT]
description: Extrude filament the length between the extruder and nozzle tip
gcode:
  SET_HEATER_TEMPERATURE HEATER=extruder TARGET=220
  {% if "xyz" not in printer.toolhead.homed_axes %}
        G28
  {% endif %}
  SAFE_PARK
  M83 ; extruder relative mode
  TEMPERATURE_WAIT SENSOR=extruder MINIMUM={218} MAXIMUM={222}   ; Wait for hotend temp (within 1 degree)
  G1 E110 F1000
  G4 S6
  SET_HEATER_TEMPERATURE HEATER=extruder TARGET=0

[gcode_macro UNLOAD_FILAMENT]
description: Retract filament the length between the extruder and nozzle tip
gcode:
  SET_HEATER_TEMPERATURE HEATER=extruder TARGET=220
  {% if "xyz" not in printer.toolhead.homed_axes %}
        G28
  {% endif %}
  SAFE_PARK
  M83 ; extruder relative mode
  TEMPERATURE_WAIT SENSOR=extruder MINIMUM={218} MAXIMUM={222}   ; Wait for hotend temp (within 1 degree)
  G1 E-110 F1000
  G4 S6
  SET_HEATER_TEMPERATURE HEATER=extruder TARGET=0